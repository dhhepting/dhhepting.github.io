<!DOCTYPE html>
<html>
    <head>
        <script id="vertex-shader" type="x-shader/x-vertex">
            #version 300 es

            in  vec4 aPosition;
            in  vec4 aColor;
            out vec4 vColor;
            uniform vec3 uTheta;

            void main()
            {
                // Compute the sines and cosines of theta for each of
                // the three axes in one computation.
                vec3 angles = radians(uTheta);
                vec3 c = cos(angles);
                vec3 s = sin(angles);

                // Remember: thse matrices are column-major
                mat4 rx = mat4(1.0, 0.0, 0.0, 0.0,
                        0.0,  c.x, s.x, 0.0,
                        0.0, -s.x, c.x, 0.0,
                        0.0,  0.0, 0.0, 1.0);
                mat4 ry = mat4(c.y, 0.0, -s.y, 0.0,
                        0.0, 1.0, 0.0, 0.0,
                        s.y, 0.0, c.y, 0.0,
                        0.0, 0.0, 0.0, 1.0);
                mat4 rz = mat4(c.z, -s.z, 0.0, 0.0,
                        s.z, c.z, 0.0, 0.0,
                        0.0, 0.0, 1.0, 0.0,
                        0.0, 0.0, 0.0, 1.0);
                vColor = aColor;
                gl_Position = rz * ry * rx * aPosition;
            }
        </script>
        <script id="fragment-shader" type="x-shader/x-fragment">
            #version 300 es

            precision mediump float;

            uniform int uColorIndex;

            in vec4 vColor;
            out vec4 fColor;

            void
            main()
            {
                vec4 c[7];
                // c[0] is not assigned
                c[1] = vec4(0.0, 0.0, 1.0, 1.0); // blue
                c[2] = vec4(0.0, 1.0, 0.0, 1.0); // green
                c[3] = vec4(0.0, 1.0, 1.0, 1.0); // cyan
                c[4] = vec4(1.0, 0.0, 0.0, 1.0); // red
                c[5] = vec4(1.0, 0.0, 1.0, 1.0); // magenta
                c[6] = vec4(1.0, 1.0, 0.0, 1.0); // yellow

                if (uColorIndex == 0) {
                    fColor = vColor;
                } else {
                    fColor = c[uColorIndex];
                }
            }
        </script>
        <script type="text/javascript" src="../Common/initShaders.js"></script>
        <script type="text/javascript" src="../Common/MVnew.js"></script>
        <script type="text/javascript" src="pick-cube.js"></script>
    </head>
    <body>
        <div>
            <canvas id="gl-canvas" width="512" height="512">
                Your browser does not support the HTML5 canvas element
            </canvas>
        </div>
        <div>
            <button id = "ButtonX">Rotate X</button>
            <button id = "ButtonY">Rotate Y</button>
            <button id = "ButtonZ">Rotate Z</button>
            <button id = "ButtonT">Toggle Rotation</button>
        </div>
        <div>
            <textarea id="picks" name="picks" rows="8" cols="64">
            </textarea>
        </div>
    </body>
</html>
