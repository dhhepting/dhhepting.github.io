{% include teaching/url.html %}

{%- comment -%}
{{ include.iid}} -- {{include.ilike }} -- {{include.icomm}}
{%- endcomment -%}
<div class="card">
  <div class="card-body">
{%- if include.ilike %}
{% assign questions = "" %}
{% for q in site.data.teaching.feedback.mf_questions %}
  {% capture questions %}{{ questions }}|{{q}}{% endcapture %}
{% endfor %}
{% assign qa = questions | split: "|" %}
{% if site.data.teaching.feedback[include.ilike] %}
  {% assign detail = "" %}
  {% assign summary = "" %}
  {% assign stop_it = false %}
  {% assign header_done = false %}
  {% for r in site.data.teaching.feedback[include.ilike] %}
    {% assign rqs = "" %}
    {% capture rqs %}{{rqs}}{{r.response}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q1}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q2}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q3}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q4}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q5}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q6}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q7}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q8}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.q9}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.avg}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.SD}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.mode}},{% endcapture %}
    {% capture rqs %}{{rqs}}{{r.median}},{% endcapture %}
    {% if stop_it == false %}
      {% capture detail %}{{detail}}#{{rqs}}{% endcapture %}
    {% else %}
      {% capture summary %}{{summary}}#{{rqs}}{% endcapture %}
    {% endif %}
    {% if rqs contains "Median" %}
      {% assign stop_it = true %}
    {% endif %}
  {% endfor %}


  <table class="table table-responsive table-striped table-bordered">
    <thead>
      <tr>
        <th>Likert Item</th>
        <th>5 Always</th>
        <th>4 [Mostly]</th>
        <th>3 [Sometimes]</th>
        <th>2 [Rarely]</th>
        <th>1 Never</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% assign summq = summary | split: "#" %}
      {% for q in (1..9) %}
        <tr>
          <td>{{qa[q]}}</td>
          {% for sq in summq %}
            {% assign sqa = sq | split: "," %}
            {% if sqa[q] %}
              <td>{{sqa[q]}}</td>
            {% endif %}
          {% endfor %}
        </tr>
      {% endfor %}
      <tr>
        <td>Total</td>
        {% assign ws = 0 %}
        {% assign wt = 6 %}
        {% assign tv = 0 %}
        {% for sq in summq %}
          {% assign sqa = sq | split: "," %}
          {% if sqa[10] %}
            <td>{{sqa[10]}}</td>
            {% if wt > 0 %}
              {% assign wp = {{sqa[10]}} | times: wt %}
              {% assign ws = ws | plus: wp %}
            {% else %}
              {% assign tv = sqa[10] | plus: 0 %}
              {% assign tv = tv | times: 1.0 %}
            {% endif %}
          {% endif %}
          {% assign wt = wt | minus: 1 %}
        {% endfor %}
        {% assign oS = ws | divided_by: tv %}
        {% assign oO = oS | divided_by: 5.0 %}
        {% assign pc = oO | times: 100.0 %}
      </tr>
      <tr>
        <th colspan="7">
          Weighted Average: {{ pc | floor }}% &lsquo;Always&rsquo;
        </th>
      </tr>
    </tbody>
  </table>

{% comment %}
	Table of Detail Data
{% endcomment %}
<p>
  <a id="likert-button-{{include.iid}}" href="#likert-detail-{{include.iid}}" class="btn btn-primary" data-toggle="collapse">
    CLICK HERE
  </a>
  to toggle details
</p>

<div id="likert-detail-{{include.iid}}" class="container collapse">
  <table class="table table-responsive table-striped table-bordered">
    <thead>
      <tr>
        <th>Response</th>
        <th>Q1</th>
        <th>Q2</th>
        <th>Q3</th>
        <th>Q4</th>
        <th>Q5</th>
        <th>Q6</th>
        <th>Q7</th>
        <th>Q8</th>
        <th>Q9</th>
        <th>Avg</th>
        <th>SD</th>
        <th>Mode</th>
        <th>Median</th>
      </tr>
    </thead>
    <tbody>
      {% assign detaild = detail | split: "#" %}
      {% for row in detaild %}
        {% assign rowa = row | split: "," %}
        <tr>
	      {% for dd in rowa %}
          {% if dd == "0" or dd == "#N/A" %}
            <td>&mdash;</td>
          {% else %}
            <td>{{dd}}</td>
          {% endif %}
        {% endfor %}
        </tr>
    {% endfor %}
</tbody>
</table>
</div>
</div>
{% endif %}
{% endif %} {%comment%}if include.ilike {%endcomment%}
{%- if include.icomm %}
{% if site.data.teaching.feedback[include.icomm] %}
<div class="card-body bg-light m-1 p-1">
<h3>What do you like best about this course?</h3>
<p></p>
<p>
  <a href="#like-detail-{{include.iid}}" class="btn btn-primary" data-toggle="collapse">
    CLICK HERE
  </a>
  to toggle details
</p>

<div id="like-detail-{{include.iid}}" class="container collapse">
<ol>
{% for l in site.data.teaching.feedback[include.icomm]like %}
  <li>{{l}}</li>
{% endfor %}
</ol>
</div>

<h3>What would you like to change about this course?</h3>
<p></p>
<p>
  <a href="#change-detail-{{include.iid}}" class="btn btn-primary" data-toggle="collapse">
    CLICK HERE
  </a>
  to toggle details
</p>
<div id="change-detail-{{include.iid}}" class="container collapse">
<ol>
{% for c in site.data.teaching.feedback[include.icomm]change %}
  <li>{{c}}</li>
{% endfor %}
</ol>
</div>
<h3>What do think are the instructor's greatest strengths?</h3>
<p></p>
<p>
  <a href="#strength-detail-{{include.iid}}" class="btn btn-primary" data-toggle="collapse">
    CLICK HERE
  </a>
  to toggle details
</p>

<div id="strength-detail-{{include.iid}}" class="container collapse">
<ol>
{% for s in site.data.teaching.feedback[include.icomm]strengths %}
  <li>{{s}}</li>
{% endfor %}
</ol>
</div>
</div>
{% endif %}
{% endif %}
</div>
