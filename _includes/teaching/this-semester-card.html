{% comment %}
{% endcomment %}
{% assign url_parts = turl | split: '/' %}
{% assign sem_size = 4 %}
{% assign crsoffs = "" %}
{% assign crs_ids = "" %}
{% for sp in site.pages %}
  {% if sp.url contains "teaching" %}
    {% assign url_parts = sp.url | split: '/' %}
    {% if url_parts.size == sem_size %}
      {% assign crs_id = url_parts[2] %}
      {% assign crs_part = crs_id | split: '-' %}
      {% if crs_part.size == 2 %}
        {% assign crsoff = url_parts | last %}
        {% if crsoff contains "2" %}
          {% capture crsoff_url %}{{crsoff}}/{%endcapture%}
          {% capture crs_url %}{{ sp.url | remove: crsoff_url }}{%endcapture%}
          {% capture crs_ids %}{{crs_ids}}|{{crs_url}}#{{crs_id}}{% endcapture %}
          {% capture crsoffs %}{{crsoffs}}|{{crs_id}}#{{crsoff}}{% endcapture %}
        {% endif %}
      {% endif %}
    {% endif %}
  {% endif %}
{% endfor %}

{% assign sortedcrs_ids = crs_ids | split: '|' | uniq | sort %}
{% assign sortedcrsoffs = crsoffs | split: '|' | sort | reverse %}
{% capture numcourses %}{{ sortedcrs_ids.size | minus:1 }}{% endcapture %}
{% capture numoffs %}{{ sortedcrsoffs.size | minus:1 }}{% endcapture %}

{% comment %}
Add direct links for courses currently offered
{% endcomment %}
{% assign yes_sem = 0 %}
{% for off in site.data.teaching.offerings %}
  {% if off.semester == now_sem %}
      {% assign yes_sem = 1 %}
  {% endif %}
{% endfor %}
{% if yes_sem == 1 %}
<div class="card my-2" id="this-sem-card">
  <h3 class="card-header text-center">This Semester</h3>
  <div class="card-body">
    <ul class="list-group list-group-flush">
  {% for off in site.data.teaching.offerings %}
    {% if off.semester == now_sem %}
    <li class="list-group-item">
      {% capture now_url %}/teaching/{{ off.id }}/{{ now_sem }}/{% endcapture %}
      <a href="{{ now_url | relative_url }}">
        {{ off.id | replace: "-", " " }}
      </a>
    </li>
    {% endif %}
  {% endfor %}
  </ul>
</div>
</div>
{%- endif -%}
