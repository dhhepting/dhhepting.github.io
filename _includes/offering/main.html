{%- include teaching/url.html -%}

<div class="w-auto h-100">
  <div class="bg-light mb-2 p-3">
    <h1>
      {{ include.title }}
    </h1>
  </div>
<!-- Make the navigation -->
  <div class="card" style="height: 85%">
    <div id="offhdr" class="card-header bg-info">
      <ul class="nav nav-pills" id="navbar-scrollspy">
        {%- if include.mtgs == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssMeetings">
            Meetings
          </a>
        </li>
        {%- endif -%}
        {%- if include.sched == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssOffice">
            Office Hours
          </a>
        </li>
        {%- endif -%}
        {%- if include.wkly == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssWkly">
            Weekly
          </a>
        </li>
        {%- endif -%}
        {%- if include.code == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssCode">
            Code
          </a>
        </li>
        {%- endif -%}
        {%- if include.links == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssLinks">
            Links
          </a>
        </li>
        {%- endif -%}
        {%- if include.topics == 1 -%}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"
            data-bs-toggle="dropdown" href="#" role="button"
            aria-expanded="false">
              Topics
          </a>
          <ul class="dropdown-menu">
          {%- assign tlooff = site.data.teaching[jcrs_id][crs_sem]tlo -%}
          {%- for ku in tlooff -%}
            {%- assign kk = ku[0] | split: "/" -%}
            {%- assign kkd = ku[1] -%}
            {%- assign kkaa = kk[0] -%}
            {%- assign kkuu = kk[1] -%}
            {% assign kunum = kkuu | slice: 0,2 %}
            {% capture kuti %}{{ kkuu | replace: "--",", " | replace: "-"," " | replace: "_","-" | slice: 3, kkuu.size }}{% endcapture %}
            {% capture kakid %}{{ kkaa }}{{ kunum }}{% endcapture %}
            <li>
              <a class="dropdown-item"
              href="#ssTLO_{{ kkaa }}_{{ kkuu }}">
                {{ kkaa }} / {{ kuti }}
              </a>
            </li>
          {%- endfor %}
          </ul>
        </li>
        {%- endif -%}

        {%- if include.exams == 1 -%}
        <li class="nav-item">
          <a class="nav-link" href="#ssExams">
            Exams
          </a>
        </li>
        {%- endif -%}

        {%- if include.feedback == 1 -%}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"
            data-bs-toggle="dropdown" href="#" role="button"
            aria-expanded="false">
              Feedback
          </a>
          <ul class="dropdown-menu">
            {%- for fboh in site.data.teaching[crs_sem][jcrs_id]feedback -%}
              {% for i in fboh[1].information %}
                {% if i.dataType == "dataCollection" %}
                <li>
                  <a class="dropdown-item" href="#ssFB_{{ fboh[0] }}">
                    {{ fboh[0] | split: "-" | last | capitalize }}
                  </a>
                </li>
                {% endif %}
              {% endfor %}
            {% endfor %}
          </ul>
        </li>
        {%- endif -%}
      </ul>
    </div>
    <div id="cbss" class="card-body cbss mh-100"
      data-bs-spy="scroll"
      data-bs-target="#navbar-scrollspy"
      data-bs-offset="0" tabindex="0">

      <!-- Create the content -->
      {%- if include.mtgs == 1 -%}
      <h3 id="ssMeetings" class="bg-dark text-white">
        Meetings
      </h3>
        {%- include offering/mtgs-all.html
            mtgdir='meetings/'
        -%}
      <p></p>
      {%- endif -%}

      {%- if include.sched == 1-%}
      <h3 id="ssOffice" class="bg-dark text-white">
        Office Hours and Semester Schedule
      </h3>
        {%- include teaching/schedule.html cs=now_sem -%}
      <p></p>
      {%- endif -%}

      {%- if include.code == 1 -%}
      <h3 id="ssCode" class="bg-dark text-white">
        Code
      </h3>
      <p>
        {%- capture code_url -%}/teaching/{{ crs_id }}/{{ page.sem }}/code/{%- endcapture -%}
        <a href="{{ code_url | relative_url }}" target="_blank">
          Code Directory
        </a>
      </p>
      {%- endif -%}

      {%- if include.links == 1 -%}
      <h3 id="ssLinks" class="bg-dark text-white">
        Links
      </h3>
      <ul>
        <li>
          {%- capture syll_url -%}/assets/teaching/pdf/{{ off_id }}_syllabus.pdf{%- endcapture -%}
          <a href="{{ syll_url | relative_url }}" target="_blank">
            Syllabus (pdf)
          </a>
        </li>
        <li>
          <a href="https://urcourses.uregina.ca/course/view.php?id={{ crs_urc }}" target="_blank">
            UR Courses
          </a>
        </li>
        {%- include offering/links-body.html -%}
      </ul>
      <p></p>
      {%- endif -%}

      {%- if include.topics == 1 -%}
      <h3 id="ssTopics" class="bg-dark text-white">
        Topics
      </h3>
        {%- include offering/tlo-body.html -%}
      <p></p>
      {%- endif -%}

      {%- if include.asgns == 1 -%}
      <h3 id="ssAssignments" class="bg-dark text-white">
        Assignments
      </h3>
        {%- include offering/asgn-body.html -%}
      <p></p>
      {%- endif -%}

      {%- if include.exams == 1 -%}
      <h3 id="ssExams" class="bg-dark text-white">
        Exams
      </h3>
        {%- include offering/exams-body.html -%}
      <p></p>
      {%- endif -%}

      {%- if include.feedback == 1 -%}
      <h3 id="ssFeedback" class="bg-dark text-white">
        Feedback
      </h3>
      {%- for fboh in site.data.teaching[crs_sem][jcrs_id]feedback -%}
        {% for i in fboh[1].information %}
          {% if i.dataType == "dataCollection" %}
          <h5 id="ssFB_{{ fboh[0] }}">
            {{ fboh[0] | split: "-" | last | capitalize }}
          </h5>
          {%- include offering/feedback-body.html fbdata=fboh -%}
          {% endif %}
        {% endfor %}
      {% endfor %}
      <p></p>
      {%- endif -%}

    <div id="offftr" class="card-header bg-info">
    </div>
  </div>
</div>
{% comment %}
<script>
$(document).ready(function(){
  var cbss = document.getElementById('cbss');
  var scrollheight = document.getElementById('mcb').offsetHeight;
  console.log('mcb',scrollheight)
  var scrollheight = scrollheight - document.getElementById('mcbftr').offsetHeight;
  console.log('-mcbftr',scrollheight)
  scrollheight = scrollheight - document.getElementById('offh1').offsetHeight;
  console.log('-h1',scrollheight)
  scrollheight = scrollheight - document.getElementById('offhdr').offsetHeight;
  console.log('-offhdr',scrollheight)
  scrollheight = scrollheight - document.getElementById('offftr').offsetHeight;
  console.log('-offftr',scrollheight)
  scrollheight = scrollheight - 10;

  cbss.style.height = scrollheight + 'px'
  console.log('cbss.style.height',cbss.style.height )
})
</script>
{% endcomment %}
