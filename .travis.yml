language: ruby
rvm:
- 2.7.2
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: vpDixJ6De8ewnZ/rO7gQOT15VVTBrw9mdDz2OIeHxs2YP2+REnNJhaDhSKTPRWhS2qFYp7bElyAmon7a28qQaWfGpTOWorHPTdt5/97zWd93HDYe0KKsJuYmdi4SWwoxgUzwgkAh3+SVgRM7thXGkvzOy6xyd7Cqjf/CqVzY11TQaaBr3QjmLPYS79qBxzc4iyRnUXeZeHtbglHrcSjAWlzPCvFVhR6kHM0dgXSHZU44dL09ZCAjkUXVyH3v6hL5j3KLpIwNWza2UhvTXOrinHSsI1b2enJPe12uY+cnt+qNldZqdWVMTdhFC7sgRtnmgO8r9VZFrrXQ4LH4m4JT5u6N1acAaTAu53h5o+3yaQIbcR9YrVxNUo5YDlz1E6vGQ5rpf9tYjACqVrStufGEDXbe/+WXgIU7F5mRmrsW0mNpOoxElfI37+NzdnJFuAu6J5BBI2xsqAjhiD9oasbSEDxYoeoALVgrqpCJ9RY2+zsnxsC/fY+VRaeh+3PsMC6ehZuapYL14F744MDF1cV7DqO8xhgGs6g23CtzOYcHgw79werqraSYSLafZKhIh2plxZCNrDrpkHPDCBPT4c3LITX2ZEdr22cwxL8X59PvZnaqJX8jJ0XCFF6XkZsIbA+YTFgWo6oYA/7zrnOFeNiMlE61zB/Ukv0XAVHhiMZU96Y=
  - secure: CIQwO3bf10IfX0aLgwU5dL2f9jwhYqbZ2CrllP5hlUG8pZLqgrqBo3DdRA3pJq+FF+C4OfCEFOF4Tci1RIgDQFcfysIfPr+oKDd3yul7keDs6yhz6HFmm/E7Q+Itfdg7yYS0Em/r3dUrILm71ukOhoSuaksX0WrJZYOoHznMXEkLKFvhvee7ExBHK0RpOq24H4UdtHY3CYLdMVAQ63GQHV/ACBW/KLj5FE4Sc7rbC++32UoIinnEMszhWnIWSIel+BupGTGlKiw9YTRhhAkDVptfPi43iai+nLYc7XJ8DwjKLpB5rl0J7AiD1lUSTU3/eOVu5wwkpgKPGZA2K+JEgbSh9T4NQ569uaacwTMyY4uMvlq+CuddDbRN0y6gX+6T+S7oaJDx9waeQPQ0y+vO2D7FHeJIqxjp3ilaYIPZKh6OgBb1R7P4rWxAwrUuznUZjuIMzG3qjrU2wB7yv9Nnhe6U9SCUWD/1LN6FXJQPI9wbwoPlhlplo5kh5U5p67pw/OqZ/CxyFbB4iCYbs2DeEmJlxUwsAA6wonGlv6KQrhtvKApyfTRfshSI11RRWTopjolwVAoQ2F0zCmBQmNEVRgt2Q7gIBNhefOaESS0nFBqGSBp2sQKsVWdjdkOng1F3DGb972DTYdCRko13AkmcEv8cJ4aQFPktzCU+U/S3gD4=
  - secure: OilMWqIxNAm75vOQGMtxH0Fr7OjWFvIaIy1ziXgQ+aG4hCXUZ3eqJnpDXjB17GWWgNS3jr9hJ4f8KFJOTy6mrnTMHlbPjWNJE/f7wfvdpJn+iD+C4C5ZqNcVCZB7zBp804c+y5RCunXcYj57viw9283dQFPW3lSB6dFoZw/b0rgyPK4+KwhwDQb51SCdJg3YKEVNdDDrbb+EUnbSWNuHS9enDxoRYowikiwTmRHiW9vsVBkBcU0OO4TeKB833ATDy67pmQR9Mc1jlt9/x3t7FtVURcsKjeWovEn3u0/DEymEUPMS2q9Ozt7QOkO+JZtbD+F5ov9/ZqomwtzNv5fb8xHJXonsilyKkZs5TBnx3S7LuWtJqLtc9FyfjUUtmPqPnBJLF4Zn+KM24BvfewraxOeIw7cs3BGQd5CZfUk35iW3e+7oZqgLtVws2pewTDYJA7P2AGlI0jcDRAWCLdcrTJqTlltcZmRgTiRZZ0NTUqwzGkj1FVroP2mNBJZQGdWbhOkDJMBYPB5aNyO1WInhiw+wCYsJcKjBe53OfWK9AYD6EovA+t79dEmZbopd+Ap1vJf7Jeinzq2vywk3n+xkhLaOYRCmALG1Fvpy3hhav2m29hKl/KqRGiJMNwylwdGmvoCf0IE6j6+tkEoOfXXtzLNTft9JSBz0rH7Yd091jXQ=
  - secure: KR7nJKHLrgcfLnqOwnqfHFm/ecqZcccQgT0i5vvVaWkgVaaeOmMKk7VCJbb612fZgCEsA7MNPGUTCJ0BD7uOYuI+QybRA5HUYGNZizpoUb2ivZydSJiwh3EBAcI0AFYeXSgfR/FrRtkOjqatBSs1ZZs1uRX72ZtAINDXl9Jv/vVKJRGuY29KNqtcY3kcUSY0tR1N/0Qk/z698bjvk8Bt3tHbh3bVJ7Pp8qIkyAn3DIwowwhQ4XcaP7dKLE8sbqMVcrEjlynLRlTzyj6p7G++wuVgk19RfkxS+8BLDqBnFR/pYgxk3ujIZ2HRaUfWfefXpqsyslTsDOWrIPMfFPUvPu1nL1ejBWJj1Urx4dSU8U7cMvk9hVn6GtPDZ36MtfooSG9oyNYiS9sMWF7oiuQaySHP2BA5qIoV1S+F1Jqo/anMau46OGvBnM1WUDikxlnfRAaEnt9pGRYHg4FZYOYk93bmU/OOKRYSw48Md3ZhWdPDzIAkXemQz+TgPkcIlAfBWXVjfehEQETBsr7c4B7rWU1LmJ6x5sB4dg1JiX5DqDKKhN7JST87Ix5F9T/tX+vz/3PxnSS1DUYagqII2lopVMpOG7hgRXGju5koKmVCDHWx5c3eTxqHkU7HJT1Itx459ymmjqEpkgimpvgbG9ox8xkMRYv0spznxy2435+ez7E=
  - secure: SnQQG+N0Z/dG86hnTuEgiyK7htCVwnbIEJclJAh0onEIK+HKwbZARUT+FD/AtPlobg2BM8AymX2X89tJzuGdqwVxKp6J1iNOQvB2LE4Nfm2LRZBFooCTedjdtjQENyJKBFlfPF40s1Q9y2I95Q9EBKyQTY1+MAR0jXIjrdrzf1ceCJAtmi/52pBuSw/0uQmAs9x5jiKzIdEU54zuhOAej6gMQY45gxt8XkGVTjWpLA8P2FhBHTbzj9hKTWVVb+GZjz80l7hKucM6KUE0Q/AYYk5n4S01a/cmxkaoOaSdsv9QdRFBe/yIFqRkEnSv0atxoC5R9o75r5Zd72m81RxIcqbXRzkPuRKESW3+4PX0Jb4B9xT5Mq+ignMU5sC+73ghGCvFF80bqY56stTxkB0bg84PCtcwC+k773BGKCXDUUruVFgfIRCoWazposJ0kbAwK5tmtsz5J9FcMz9XWmyOqUiwAvXMdjfj8ynQBWaafk/gDQv2rYVuavyu5oNdmYlnTB2XbWEKyaRO//u0cYJrQP/OZiJUk1mda3TvQGdpTBFHP9dEeqtfNxE9CEcfvOgjFpFdBkgj5BtSQRIgWJnkJqiJXwR+ozN1lRFGJrvDNIuW4fWcY9lcEoo8rBRI9VHElRFX1ZsxcL+p/5o0G6q+YJ/NMkbi4VXwqD6/oP+WeZc=
exclude:
- vendor
cache: bundler
before_script:
- chmod +x ./script/cibuild
script: "./script/cibuild"
before_install:
- openssl aes-256-cbc -K $encrypted_51a517831301_key -iv $encrypted_51a517831301_iv
  -in deploy_rsa.enc -out deploy_rsa -d
- eval "$(ssh-agent -s)"
- chmod 600 deploy_rsa
- ssh-add deploy_rsa
- echo -e "Host $DEPLOY_HOST\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
deploy:
- provider: pages
  skip_cleanup: true
  token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    branch: master
- provider: script
  skip_cleanup: true
  script: rsync --verbose -p -r --delete-after $TRAVIS_BUILD_DIR/_deploy/ $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_DIR
  on:
    branch: master
