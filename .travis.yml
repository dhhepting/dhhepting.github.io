language: ruby
rvm:
- 2.3.3
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: Ksjscb2W+EZ8E09o4QQ34BzG1oEESBPB6L0PGv4YrVthkqHj9xWfNIlvXm5Yjq6ufkn9mVI4WFeNEM4PGZn1BdmASXRm2LyuexYWGWBI0mY5G3ib2C1S9AynJ89TZaXKLQo1zSpcylGxsMmRx3Rp1EukLixUzYiNoczYRp8hm9tnl481te7fCnCvMRUbTXunqp+K6f++bzwvNnoDNSTD5jyYJyyNUdfGBzstCE0MRi9fDLNr58DwbXQvsxNyKfYT81Hdd1MUa0tm8shQHnRCPyjPb9lzd4OvkteqZxL4GGryKLtpk3DWNHp+7BVhri+XRn5T3qr6VBiR5JnBIMfKl/iSAW+rnLGLEr9FAmG+1rhBMR5IhIFy6opQNbdS0MciilYCGiga4wJzI0smUwmKvg3zS6RTFgRsqQPd4iTeJEl0umlm7Bf8fJ3L/IXhja4AnyA3ctLJoEYcWfGYJogBT1sMsSovqfVemfyGANuBFXfWbBMeULj3aYC6OewNknNhA2DP0no5OsiEpaA9DHq7j0vR9rTIgKYFjFpzDbIh+IujQeeV0wQgwVa4D6LjMO+G3/MZdrEobvXDcUalRYTBgQNTBo+5e5mwIHt3M0QQVO9t6OBw0J6q6Ci3V3ZLAlVzWZS61L9109Kq+0ZNz5iVVT7rqTvoR65898j9v7e/FqY=
  - secure: vDlN1Ksv82KuIJNV5qGEhLtP4xOSdCd/oqYIaubrgvG0MiWFxtcyj+8GX8SqycOZ6I4dSYtU0Eo/RETuAcZUDIu/XFD5Jn23vO9Vk4HvB3eXRbCemEo55dhbi/gHFjcYF6bfyNRs8o48fLEB/pvUEyhnevhLg35Cet8mroNop/BBmjwlq6zUS7R5MWRMKha8V2/PD3/3B1BXb3fwyjrjU8TnAvtLnaH61aQipO/srAyqp5YWhhydasbthbRIqFfCO28eK79325pzXUFytugYMIP8ei+r+I8hJYWNZHR0f6lrVpHEJmAhLrmFLu4Ple93iirxH8CNhPXVIbnLDyrQCT7TXdnQC8wWKf6xH/dHjlilax8KbbxAjmEmqAd585Yni92v64t0VRuh7kRzC1IvYAAGhRqEYfyJZHYTknyzX81Nryytx7q+WhFwuvxUaicqgT/OGJNZzW6lCJZ3HAHPQkoiG38p+wWyer225PzBT9UrF5w+trv/eiVCaf1tmMn3Tlz+ocAEYcWHKQzIGjnT0ahq9Fvrgsn+jGjH+ey543Qo4bB6imQSMcjVqcfhqNy5wbiUuxumG5HjiMp+9EFDqS5ZxV1HlzRq8jhn7TNzzMDIdW0pr/iuOkL2+QqaVlLWZOoDWmf8bDnQfDaHLne7q7IXFaIQAnZrbivPAy6EohA=
  - secure: fAVEqg9IULvs5DfdzlCp9QnuGh0bA5B67osjPUmP85ZV/gJuaZj1N0XbEz9tE60k62lUakxzPFINcpBE3IHCTzjfIOLFra6B5KTZrfkhuLP2Oru1ce7nM8VqEFRMwg8pk/Ox4WI5h/XZEOLrsA9ZnoWPSvJUf5ZHEkwamovd1LBqJfZLiCUlFEsbOO/OuuCIW+Rb0ZrNRxcQUmO1+vl2EDRBa5VHE36W9TIonPmQJIqNs/VWKQbxfOTZSyJjbZ7XFYaT2H8S02sR3Nd82GI6P1+tBrLlVBl+9jWWK1XII/lJuMnCvOyL4fOGBTm/jln0QB2nojrFeNfkzNDYmO30J6h9aIbDYyyn4JkdImKTEoRMjhskeoRk2rFC1Gnv+hh+i8BGy1VWVhAD497WA5lfDvX5f702IOxWjvN4dHf8COq4aSEej+100cRXA3JfZalbsEHEKr0DoI3NLbCNG0kw+nx0/kD13Eap44b4r+3sJTpuKB4ZmBZo6gg0Uw3OOgQ1trW3uMbl/JlWhzeBz2Z3odgVEWMGBR8+5v10tx3zGXYBoNVHs4Nu67uibMklDexX1+v3sTDGOr4U3xZ84Gi8ooSZt3pTLN8MrE8n1to+j0SRmlPxSebuMpdLcAwlZSDgaC9kAIkRi17fmOmrb7ESCRq1JDgLdWmb/u/UmerhGXA=
exclude:
- vendor
before_script:
- chmod +x ./script/cibuild
script: "./script/cibuild"
before_install:
- openssl aes-256-cbc -K $encrypted_51a517831301_key -iv $encrypted_51a517831301_iv
  -in deploy_rsa.enc -out deploy_rsa -d
- eval "$(ssh-agent -s)"
- chmod 600 deploy_rsa
- ssh-add deploy_rsa
- echo -e "Host $DEPLOY_HOST\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
deploy:
- provider: pages
  skip-cleanup: true
  github-token: "$GITHUB_TOKEN"
  keep-history: true
  on:
    branch: master
- provider: script
  skip_cleanup: true
  script: rsync --verbose -p -r --delete-after $TRAVIS_BUILD_DIR/_deploy/ $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_DIR
  on:
    branch: master
